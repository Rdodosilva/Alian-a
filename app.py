import streamlit as st
import folium
from streamlit_folium import folium_static
from datetime import datetime

# Configura√ß√£o da p√°gina
st.set_page_config(
    page_title="Alian√ßa por Floripa",
    page_icon="üíö",
    layout="wide",
    initial_sidebar_state="expanded"
)

# CSS customizado
st.markdown("""
<style>
    .main-header {
        background: linear-gradient(135deg, #E63946 0%, #FF6B35 100%);
        padding: 3rem 2rem;
        border-radius: 15px;
        color: white;
        text-align: center;
        margin-bottom: 2rem;
        box-shadow: 0 8px 30px rgba(230,57,70,0.3);
    }
    .main-header h1 {
        color: white !important;
        font-size: 3rem;
        font-weight: 900;
        margin-bottom: 0.5rem;
    }
    .logo-home {
        text-align: center;
        margin: 2rem 0;
    }
    .metric-card {
        background: white;
        padding: 2rem;
        border-radius: 12px;
        border-left: 6px solid #E63946;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        transition: all 0.3s;
    }
    .metric-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    }
    .equipe-card {
        background: linear-gradient(135deg, #fff5f2 0%, #ffe8e8 100%);
        padding: 2rem;
        border-radius: 12px;
        border-left: 6px solid #E63946;
        margin: 1.5rem 0;
        box-shadow: 0 3px 15px rgba(0,0,0,0.08);
    }
    .stButton>button {
        background: linear-gradient(135deg, #E63946 0%, #FF6B35 100%);
        color: white;
        font-weight: 700;
        border: none;
        padding: 0.75rem 2rem;
        border-radius: 10px;
        transition: all 0.3s;
    }
    .stButton>button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(230,57,70,0.3);
    }
    h1, h2, h3 {
        color: #E63946;
    }
    .sidebar .sidebar-content {
        background: linear-gradient(180deg, #fff 0%, #f8f9fa 100%);
    }
    .parceiro-badge {
        background: #f8f9fa;
        padding: 8px 15px;
        border-radius: 20px;
        display: inline-block;
        margin: 5px;
        border: 2px solid #E63946;
        color: #E63946;
        font-weight: 600;
        font-size: 0.9rem;
    }
</style>
""", unsafe_allow_html=True)

# Sidebar
with st.sidebar:
    # Logo SVG do projeto
    st.markdown("""
    <div style="text-align: center; padding: 20px;">
        <svg width="150" height="150" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <g transform="translate(100,100)">
                <path d="M-15,-60 L-10,-50 L-5,-55 L0,-50 L5,-55 L10,-50 L15,-60 L10,-65 L0,-70 L-10,-65 Z" fill="#FF6B35"/>
                <path d="M60,-15 L50,-10 L55,-5 L50,0 L55,5 L50,10 L60,15 L65,10 L70,0 L65,-10 Z" fill="#D95323"/>
                <path d="M15,60 L10,50 L5,55 L0,50 L-5,55 L-10,50 L-15,60 L-10,65 L0,70 L10,65 Z" fill="#E8737F"/>
                <path d="M-60,15 L-50,10 L-55,5 L-50,0 L-55,-5 L-50,-10 L-60,-15 L-65,-10 L-70,0 L-65,10 Z" fill="#C9525F"/>
            </g>
            <path d="M100 70 C85 70 75 80 75 92 C75 100 80 107 90 117 L100 127 L110 117 C120 107 125 100 125 92 C125 80 115 70 100 70 Z" fill="#E63946" stroke="#fff" stroke-width="3"/>
            <ellipse cx="92" cy="85" rx="10" ry="14" fill="white" opacity="0.5"/>
        </svg>
    </div>
    """, unsafe_allow_html=True)
    
    st.markdown("<h2 style='text-align: center; color: #E63946;'>Alian√ßa por Floripa</h2>", unsafe_allow_html=True)
    st.markdown("<p style='text-align: center; color: #666; font-size: 0.9rem;'>Florian√≥polis unida para transformar vidas</p>", unsafe_allow_html=True)
    
    st.markdown("---")
    st.markdown("### üèõÔ∏è Navega√ß√£o")
    page = st.radio("", [
        "üè† In√≠cio",
        "üó∫Ô∏è Mapa de Atua√ß√£o",
        "üë• Equipes",
        "üìã Roteiro Operacional",
        "üìä Recursos",
        "üíö Sobre o Projeto"
    ], label_visibility="collapsed")
    
    st.markdown("---")
    st.markdown("### ü§ù Parceiros")
    st.markdown("""
    <div style='text-align: center;'>
        <span class='parceiro-badge'>ACIF</span>
        <span class='parceiro-badge'>CDL</span>
        <span class='parceiro-badge'>Conseg</span>
        <span class='parceiro-badge'>Prefeitura</span>
        <span class='parceiro-badge'>Rumo Certo</span>
    </div>
    """, unsafe_allow_html=True)
    
    st.markdown("---")
    st.markdown("### üîó Site Oficial")
    st.markdown("[www.aliancaporfloripa.com.br](https://www.aliancaporfloripa.com.br)")

# P√°ginas
if page == "üè† In√≠cio":
    # Logo grande na home
    st.markdown("""
    <div class='logo-home'>
        <svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <g transform="translate(100,100)">
                <path d="M-15,-60 L-10,-50 L-5,-55 L0,-50 L5,-55 L10,-50 L15,-60 L10,-65 L0,-70 L-10,-65 Z" fill="#FF6B35"/>
                <path d="M60,-15 L50,-10 L55,-5 L50,0 L55,5 L50,10 L60,15 L65,10 L70,0 L65,-10 Z" fill="#D95323"/>
                <path d="M15,60 L10,50 L5,55 L0,50 L-5,55 L-10,50 L-15,60 L-10,65 L0,70 L10,65 Z" fill="#E8737F"/>
                <path d="M-60,15 L-50,10 L-55,5 L-50,0 L-55,-5 L-50,-10 L-60,-15 L-65,-10 L-70,0 L-65,10 Z" fill="#C9525F"/>
            </g>
            <path d="M100 70 C85 70 75 80 75 92 C75 100 80 107 90 117 L100 127 L110 117 C120 107 125 100 125 92 C125 80 115 70 100 70 Z" fill="#E63946" stroke="#fff" stroke-width="3"/>
            <ellipse cx="92" cy="85" rx="10" ry="14" fill="white" opacity="0.5"/>
        </svg>
    </div>
    """, unsafe_allow_html=True)
    
    st.markdown("""
    <div class="main-header">
        <h1>üíö Alian√ßa por Floripa</h1>
        <p style="font-size: 1.3rem; margin: 0;">Plano de Revitaliza√ß√£o do Centro Hist√≥rico</p>
    </div>
    """, unsafe_allow_html=True)
    
    col1, col2, col3 = st.columns(3)
    
    with col1:
        st.markdown('<div class="metric-card">', unsafe_allow_html=True)
        st.metric("√Åreas Priorit√°rias", "10", "Centro Hist√≥rico")
        st.markdown('</div>', unsafe_allow_html=True)
    
    with col2:
        st.markdown('<div class="metric-card">', unsafe_allow_html=True)
        st.metric("Vasos para Replantio", "69", "Rua Felipe Schmidt")
        st.markdown('</div>', unsafe_allow_html=True)
    
    with col3:
        st.markdown('<div class="metric-card">', unsafe_allow_html=True)
        st.metric("Equipes de Trabalho", "2", "Atua√ß√£o simult√¢nea")
        st.markdown('</div>', unsafe_allow_html=True)
    
    st.markdown("## üíö Sobre o Projeto")
    st.write("""
    **A Alian√ßa por Floripa √© uma iniciativa da sociedade civil** que re√∫ne a ACIF 
    (Associa√ß√£o Empresarial de Florian√≥polis), a CDL Florian√≥polis e o Conseg Centro, 
    com apoio da Prefeitura de Florian√≥polis e do projeto Rumo Certo da Associa√ß√£o Alberto de Souza.
    """)
    
    st.info("""
    **üéØ Nosso Prop√≥sito:**  
    Unir for√ßas para transformar esmolas em oportunidades reais, garantindo que cada 
    contribui√ß√£o seja aplicada de forma transparente e efetiva para reinserir pessoas 
    na sociedade atrav√©s de capacita√ß√£o e oportunidades de trabalho digno.
    """)
    
    st.markdown("### ‚úì Como Funciona")
    col1, col2 = st.columns(2)
    with col1:
        st.success("‚úì Fundo √∫nico gerido por ACIF, CDL e CONSEG Centro")
        st.success("‚úì Baseado no projeto Rumo Certo com resultados comprovados")
    with col2:
        st.success("‚úì Reinser√ß√£o social com capacita√ß√£o profissional")
        st.success("‚úì Transpar√™ncia total com auditoria p√∫blica regular")

elif page == "üó∫Ô∏è Mapa de Atua√ß√£o":
    st.markdown("## üó∫Ô∏è Mapa de Atua√ß√£o - Centro de Florian√≥polis")
    st.write("√Åreas de trabalho com delimita√ß√£o precisa das ruas e pra√ßas")
    
    # Criar mapa com Folium
    m = folium.Map(
        location=[-27.5950, -48.5490],
        zoom_start=16.5,
        tiles='OpenStreetMap'
    )
    
    # AZUL - Em Andamento: Ag√™ncia Central dos Correios (Pra√ßa XV)
    correios_coords = [
        [-27.5952, -48.5492],
        [-27.5950, -48.5492],
        [-27.5950, -48.5488],
        [-27.5952, -48.5488]
    ]
    
    folium.Polygon(
        locations=correios_coords,
        color='#007bff',
        fill=True,
        fillColor='#007bff',
        fillOpacity=0.6,
        weight=4,
        popup="<b>‚ö° Ag√™ncia Central dos Correios</b><br>Pra√ßa XV, 242<br><span style='color: #007bff;'>EM ANDAMENTO</span>"
    ).add_to(m)
    
    # AZUL - Terminal Cidade de Florian√≥polis (antigo)
    terminal_coords = [
        [-27.5990, -48.5513],
        [-27.5985, -48.5513],
        [-27.5985, -48.5508],
        [-27.5990, -48.5508]
    ]
    
    folium.Polygon(
        locations=terminal_coords,
        color='#007bff',
        fill=True,
        fillColor='#007bff',
        fillOpacity=0.6,
        weight=4,
        popup="<b>‚ö° Terminal Cidade de Florian√≥polis</b><br><span style='color: #007bff;'>EM ANDAMENTO</span>"
    ).add_to(m)
    
    # VERMELHO - Rua Felipe Schmidt (linha da rua)
    felipe_schmidt_coords = [
        [-27.5958, -48.5492],
        [-27.5958, -48.5505],
        [-27.5960, -48.5505],
        [-27.5960, -48.5492]
    ]
    
    folium.Polygon(
        locations=felipe_schmidt_coords,
        color='#dc3545',
        fill=True,
        fillColor='#dc3545',
        fillOpacity=0.4,
        weight=3,
        popup="<b>üìç Rua Felipe Schmidt</b><br>Replantio de 69 vasos<br><span style='color: #dc3545;'>PLANEJADA</span>"
    ).add_to(m)
    
    # VERMELHO - Pra√ßa XV de Novembro
    praca_xv_coords = [
        [-27.5952, -48.5495],
        [-27.5952, -48.5485],
        [-27.5958, -48.5485],
        [-27.5958, -48.5495]
    ]
    
    folium.Polygon(
        locations=praca_xv_coords,
        color='#dc3545',
        fill=True,
        fillColor='#dc3545',
        fillOpacity=0.4,
        weight=3,
        popup="<b>üìç Pra√ßa XV de Novembro</b><br>Jardinagem e limpeza<br><span style='color: #dc3545;'>PLANEJADA</span>"
    ).add_to(m)
    
    # VERMELHO - Pra√ßa Fernando Machado
    praca_fernando_coords = [
        [-27.5970, -48.5515],
        [-27.5970, -48.5505],
        [-27.5980, -48.5505],
        [-27.5980, -48.5515]
    ]
    
    folium.Polygon(
        locations=praca_fernando_coords,
        color='#dc3545',
        fill=True,
        fillColor='#dc3545',
        fillOpacity=0.4,
        weight=3,
        popup="<b>üìç Pra√ßa Fernando Machado</b><br>Manuten√ß√£o de √°reas verdes<br><span style='color: #dc3545;'>PLANEJADA</span>"
    ).add_to(m)
    
    # VERMELHO - Rua Conselheiro Mafra (linha da rua)
    mafra_coords = [
        [-27.5962, -48.5495],
        [-27.5962, -48.5480],
        [-27.5964, -48.5480],
        [-27.5964, -48.5495]
    ]
    
    folium.Polygon(
        locations=mafra_coords,
        color='#dc3545',
        fill=True,
        fillColor='#dc3545',
        fillOpacity=0.4,
        weight=3,
        popup="<b>üìç Rua Conselheiro Mafra</b><br>Varri√ß√£o e higieniza√ß√£o<br><span style='color: #dc3545;'>PLANEJADA</span>"
    ).add_to(m)
    
    # VERMELHO - Rua Tiradentes (linha da rua)
    tiradentes_coords = [
        [-27.5945, -48.5485],
        [-27.5945, -48.5470],
        [-27.5947, -48.5470],
        [-27.5947, -48.5485]
    ]
    
    folium.Polygon(
        locations=tiradentes_coords,
        color='#dc3545',
        fill=True,
        fillColor='#dc3545',
        fillOpacity=0.4,
        weight=3,
        popup="<b>üìç Rua Tiradentes</b><br>Limpeza de vias<br><span style='color: #dc3545;'>PLANEJADA</span>"
    ).add_to(m)
    
    # VERMELHO - Cal√ßad√£o Jo√£o Pinto
    joao_pinto_coords = [
        [-27.5975, -48.5490],
        [-27.5975, -48.5475],
        [-27.5977, -48.5475],
        [-27.5977, -48.5490]
    ]
    
    folium.Polygon(
        locations=joao_pinto_coords,
        color='#dc3545',
        fill=True,
        fillColor='#dc3545',
        fillOpacity=0.4,
        weight=3,
        popup="<b>üìç Cal√ßad√£o Jo√£o Pinto</b><br>Limpeza completa<br><span style='color: #dc3545;'>PLANEJADA</span>"
    ).add_to(m)
    
    # Exibir mapa
    folium_static(m, width=1200, height=650)
    
    # Legenda
    st.markdown("### üìä Legenda do Mapa")
    col1, col2 = st.columns(2)
    with col1:
        st.markdown("üîµ **Azul - Em Andamento:**")
        st.write("‚Ä¢ Ag√™ncia Central dos Correios (Pra√ßa XV, 242)")
        st.write("‚Ä¢ Terminal Cidade de Florian√≥polis")
    with col2:
        st.markdown("üî¥ **Vermelho - Planejadas:**")
        st.write("‚Ä¢ Ruas: Felipe Schmidt, Conselheiro Mafra, Tiradentes, Jo√£o Pinto")
        st.write("‚Ä¢ Pra√ßas: XV de Novembro e Fernando Machado")

elif page == "üë• Equipes":
    st.markdown("## üë• Distribui√ß√£o das Equipes")
    
    st.markdown('<div class="equipe-card">', unsafe_allow_html=True)
    st.markdown("### üü† EQUIPE 1 ‚Äî Zona Comercial Norte")
    st.write("**Foco:** Revitaliza√ß√£o comercial e replantio")
    st.markdown("""
    - üîµ **Ag√™ncia Central dos Correios** (Pra√ßa XV, 242) - *EM ANDAMENTO*
    - üå∏ **Rua Felipe Schmidt** - Replantio de 69 vasos ornamentais
    - üìç **Rua Conselheiro Mafra** - Varri√ß√£o e higieniza√ß√£o
    - üìç **Rua Jer√¥nimo Coelho**
    - üìç **Rua Trajano**
    """)
    st.markdown('</div>', unsafe_allow_html=True)
    
    st.markdown('<div class="equipe-card">', unsafe_allow_html=True)
    st.markdown("### üî¥ EQUIPE 2 ‚Äî Pra√ßas e Zona Sul")
    st.write("**Foco:** √Åreas de conviv√™ncia e espa√ßos p√∫blicos")
    st.markdown("""
    - üå≥ **Pra√ßa XV de Novembro** - Jardinagem e limpeza de mobili√°rio
    - üå≥ **Pra√ßa Fernando Machado** - Manuten√ß√£o de √°reas verdes
    - üìç **Rua Tiradentes** - Varri√ß√£o
    - üìç **Cal√ßad√£o Jo√£o Pinto** - Limpeza completa
    - üìç **Ruas Saldanha Marinho e Nunes Machado**
    - üîµ **Terminal Cidade de Florian√≥polis** - *EM ANDAMENTO*
    """)
    st.markdown('</div>', unsafe_allow_html=True)

elif page == "üìã Roteiro Operacional":
    st.markdown("## üìã Roteiro Operacional")
    
    with st.expander("üîÑ Fase 1: Prepara√ß√£o e Briefing", expanded=True):
        st.write("""
        - Encontro de todas as equipes no ponto de reuni√£o central
        - Distribui√ß√£o de EPIs (luvas, coletes identificados, bon√©s)
        - Distribui√ß√£o de materiais, ferramentas e equipamentos
        - Briefing detalhado com orienta√ß√µes de seguran√ßa
        - Deslocamento organizado para as √°reas de atua√ß√£o
        """)
    
    with st.expander("üü† Fase 2: Execu√ß√£o ‚Äî Equipe 1"):
        st.write("""
        1. **Limpeza da Ag√™ncia dos Correios** (Pra√ßa XV, 242) - *EM ANDAMENTO*
        2. **Replantio dos 69 vasos na Rua Felipe Schmidt** (atividade principal)
        3. **Varri√ß√£o das Ruas** Conselheiro Mafra, Jer√¥nimo Coelho e Trajano
        """)
    
    with st.expander("üî¥ Fase 3: Execu√ß√£o ‚Äî Equipe 2"):
        st.write("""
        1. **Jardinagem da Pra√ßa XV de Novembro**
        2. **Manuten√ß√£o da Pra√ßa Fernando Machado**
        3. **Limpeza do Terminal Cidade** - *EM ANDAMENTO*
        4. **Varri√ß√£o de ruas** Tiradentes, Jo√£o Pinto, Saldanha Marinho
        """)
    
    with st.expander("üì∏ Fase 4: Finaliza√ß√£o e Registro"):
        st.write("""
        - Recolhimento de materiais e ferramentas
        - Registro fotogr√°fico "antes e depois"
        - Reuni√£o de avalia√ß√£o
        - Relat√≥rio de atividades
        - Documenta√ß√£o para presta√ß√£o de contas
        """)

elif page == "üìä Recursos":
    st.markdown("## üìä Recursos e Materiais")
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("### üßπ Equipamentos de Limpeza")
        st.write("""
        - Vassouras profissionais
        - P√°s coletoras
        - Carrinhos de recolhimento
        - Sacos de lixo resistentes (100L)
        - Mangueiras de alta press√£o
        - Lavadora de alta press√£o
        """)
        
        st.markdown("### ü¶∫ EPIs e Seguran√ßa")
        st.write("""
        - Luvas de prote√ß√£o
        - Coletes identificados
        - Bon√©s/chap√©us
        - Protetor solar
        - Garrafas de √°gua
        - Kit primeiros socorros
        """)
    
    with col2:
        st.markdown("### üå± Jardinagem")
        st.write("""
        - **69 mudas/flores** para Felipe Schmidt
        - Substrato e terra de qualidade
        - Adubo org√¢nico
        - Regadores
        - Ferramentas de jardinagem
        - Tesouras de poda
        """)
        
        st.markdown("### üìã Apoio Log√≠stico")
        st.write("""
        - Ve√≠culos para transporte
        - Sinaliza√ß√£o de seguran√ßa
        - Cones de tr√¢nsito
        - C√¢meras fotogr√°ficas
        - Coordena√ß√£o por r√°dio/celular
        """)
    
    st.warning("""
    **‚ö†Ô∏è Checklist de Seguran√ßa Obrigat√≥rio:**
    - Uso obrigat√≥rio de EPIs durante toda opera√ß√£o
    - Sinaliza√ß√£o adequada nas √°reas de trabalho
    - Hidrata√ß√£o constante da equipe
    - Pausas regulares programadas
    """)

else:  # Sobre o Projeto
    st.markdown("## üíö Sobre o Projeto Alian√ßa por Floripa")
    
    st.write("""
    A Alian√ßa por Floripa √© uma **iniciativa da sociedade civil** que re√∫ne a ACIF, 
    a CDL e o Conseg Centro, com apoio da Prefeitura de Florian√≥polis e do projeto 
    Rumo Certo da Associa√ß√£o Alberto de Souza.
    """)
    
    st.info("""
    **üéØ Nosso Prop√≥sito**
    
    Unir for√ßas para transformar esmolas em oportunidades reais, garantindo que cada 
    contribui√ß√£o seja aplicada de forma transparente e efetiva para reinserir pessoas 
    na sociedade atrav√©s de capacita√ß√£o e oportunidades de trabalho digno.
    """)
    
    st.markdown("### üìä Impacto Esperado")
    
    col1, col2 = st.columns(2)
    with col1:
        st.success("""
        **üåÜ Impacto Urbano**
        - Centro mais limpo e organizado
        - Espa√ßos p√∫blicos revitalizados
        - Valoriza√ß√£o do com√©rcio local
        - Atra√ß√£o de visitantes
        """)
    
    with col2:
        st.success("""
        **üë• Impacto Social**
        - Oportunidades de trabalho
        - Capacita√ß√£o profissional
        - Reinser√ß√£o social efetiva
        - Dignidade e cidadania
        """)
    
    st.markdown("### üîç Transpar√™ncia")
    st.write("""
    - **Gest√£o Compartilhada**: Fundo gerido por ACIF, CDL e CONSEG Centro
    - **Auditoria Regular**: Presta√ß√£o de contas p√∫blica
    - **Relat√≥rios Peri√≥dicos**: Acompanhamento de resultados alcan√ßados
    """)
    
    st.markdown("---")
    st.markdown("### üîó Saiba Mais")
    st.markdown("""
    <div style='background: linear-gradient(135deg, #E63946 0%, #FF6B35 100%); 
                padding: 2.5rem; border-radius: 15px; text-align: center; color: white;'>
        <h2 style='color: white; margin-bottom: 1rem;'>üíö Fa√ßa Parte Desta Transforma√ß√£o</h2>
        <h3 style='color: white; margin-bottom: 1rem; font-size: 2rem;'>www.aliancaporfloripa.com.br</h3>
        <p style='font-size: 1.1rem;'>Doe via PIX ‚Ä¢ Acompanhe resultados ‚Ä¢ Transforme vidas</p>
    </div>
    """, unsafe_allow_html=True)

# Footer
st.markdown("---")
st.markdown("""
<div style='text-align: center; color: #666; padding: 2rem;'>
    <p style='font-size: 1.1rem;'><strong>Alian√ßa por Floripa</strong> ‚Äî Uma iniciativa da sociedade civil</p>
    <p style='margin: 1rem 0;'>ACIF ‚Ä¢ CDL Florian√≥polis ‚Ä¢ Conseg Centro ‚Ä¢ Prefeitura de Florian√≥polis ‚Ä¢ Projeto Rumo Certo</p>
    <p style='font-size: 0.9rem; margin-top: 1.5rem; color: #999;'>
        Desenvolvido para o projeto de revitaliza√ß√£o do centro hist√≥rico de Florian√≥polis
    </p>
</div>
""", unsafe_allow_html=True)
